<mat-card>
  <h3>Agenda una sesion</h3>
  <form  [formGroup]="sessionForm" (ngSubmit)="onSubmit(f)" #f="ngForm">
  <div class="form-group">
      <mat-form-field >
        <mat-select placeholder="CURP" formControlName="curp" id="curp">
          <mat-option *ngFor="let patient of patients" [value]="patient.curp">
            {{ patient.curp }}
          </mat-option>
        </mat-select>
     </mat-form-field>
     <mat-form-field >
      <input
       matInput
       type="time"
       placeholder="Hora"
       formControlName="hora"
       id="hora"
       />
     </mat-form-field>
     <mat-form-field>
      <input
      matInput
      [matDatepicker]="pickerTo"
      placeholder="Fecha"
      formControlName="fecha"
      [min]="today"
      id="fecha"
      readonly/>
      <mat-datepicker-toggle matSuffix [for]="pickerTo"></mat-datepicker-toggle>
      <mat-datepicker #pickerTo></mat-datepicker>
    </mat-form-field>
    <mat-form-field>
      <input
       matInput
       type="number"
       placeholder="# de Sesión"
       formControlName="noSession"
       id="noSession"
       />
    </mat-form-field>
      <mat-form-field>
        <textarea
        matInput
        placeholder="Observaciones"
        matTextareaAutosize
        matAutosizeMinRows="1"
        matAutosizeMaxRows="4"
        formControlName="observaciones"
        id="observaciones">
        </textarea>
    </mat-form-field>
    <button type="submit" mat-raised-button color="primary">Agendar</button>
  </div>
</form>
</mat-card>

<mat-card>
  <h3>Consultar sesiones por fecha</h3>
  <div class="aligner">
    <div class="picker">
      <mat-form-field class="datepicker-consult">
        <input matInput [matDatepicker]="picker" placeholder="Fecha" (dateChange)="addEvent($event)"/>
        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
        <mat-datepicker #picker></mat-datepicker>
      </mat-form-field>
    </div>
    <mat-spinner *ngIf="loading"></mat-spinner>
    <div class="table-container" *ngIf="!loading">
      <table matSort (matSortChange)="sortData($event)" class="patient-table">
        <tr>
          <th mat-sort-header="name">CURP</th>
          <th mat-sort-header="calories">Fecha</th>
          <th mat-sort-header="fat">Hora</th>
          <th mat-sort-header="carbs">No de Sesión</th>
          <th mat-sort-header="protein">Observaciones</th>
        </tr>

        <tr *ngFor="let session of sessions">
          <td><a md-button color="primary" [routerLink]="['/therapist', 'consult', session.curpp]">{{ session.curpp }}</a></td>
          <td>{{ session.date }}</td>
          <td>{{ session.time }}</td>
          <td>{{ session.sessionnumber }}</td>
          <td>{{ session.notes }}</td>
        </tr>
      </table>
    </div>
  </div>
</mat-card>
